cmake_minimum_required (VERSION 2.8)
PROJECT (miniOS)

INCLUDE_DIRECTORIES(kernel)
add_subdirectory(src/kernel/)

SET (CMAKE_C_FLAGS "${ISA_C_FLAGS} ${PLATFORM_C_FLAGS}")
SET (CMAKE_CXX_FLAGS "${ISA_CXX_FLAGS} ${PLATFORM_CXX_FLAGS}")
if( DEFINED PLATFORM_LINK )
	SET(CMAKE_EXE_LINKER_FLAGS "-T${PLATFORM_LINK} -N ${ISA_LINKER_FLAGS} ${PLATFORM_LINKER_FLAGS}")
else( DEFINED PLATFORM_LINK )
	SET(CMAKE_EXE_LINKER_FLAGS "-N ${ISA_LINKER_FLAGS} ${PLATFORM_LINKER_FLAGS}")
endif( DEFINED PLATFORM_LINK )

ENABLE_LANGUAGE (ASM_NASM)

set(miniOS_SOURCES ${ISA_SOURCE} ${PLATFORM_SOUCER})

ADD_EXECUTABLE(miniOS
	${miniOS_SOURCES})

